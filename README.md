# Telegram 消息处理机器人

这是一个基于 Python 和 python-telegram-bot 库开发的 Telegram 消息处理机器人。它可以自动处理加入的群组和频道中的消息,根据预设的正则表达式规则对消息文本进行替换和编辑。

## 功能特性

- 自动处理加入的群组和频道的消息（不可处理历史消息）
- 使用正则表达式对消息文本进行替换和编辑（代码中是. 请根据需求进行更改替换。）
- 可配置的启动消息和替换规则
- 忽略非文本类型的消息,如图片、视频等
- 记录详细的日志信息

## 依赖库

- Python 3.7+
- python-telegram-bot 13.7+

## 安装与运行

1. 克隆此仓库到本地:https://github.com/hansir676/hansir676.git
2. 进入项目目录:
3. 安装依赖库:pip install -r requirements.txt
4. 将你的 Telegram 机器人 Token 填写到 `config` 字典的 `bot_token` 字段中。
5. 运行机器人: python telegram-bot
现在,你的机器人已经在运行并监听消息了。将它添加到你的群组或频道,它就会自动处理消息。

现在,你的机器人已经在运行并监听消息了。将它添加到你的群组或频道,它就会自动处理消息。

## 配置说明

可以通过修改 `DEFAULT_CONFIG` 字典中的配置项来自定义机器人的行为:

- `bot_token`: 你的 Telegram 机器人 Token。
- `start_message`: 当有人发送 `/start` 命令时,机器人回复的欢迎消息。
- `edit_empty_message`: 如果替换后的消息文本为空,则使用此文本作为替换后的内容。
- `ignore_message_types`: 要忽略处理的消息类型列表。

## 正则表达式规则

机器人使用正则表达式对消息文本进行替换和编辑。正则表达式是一种用于匹配和操作文本的强大工具。它使用特殊的语法来描述文本的模式,可以用于搜索、替换和提取文本。

你可以在 `process_message` 函数中找到并修改正则表达式,以满足你的特定需求。以下是一些常见的正则表达式模式:

- `@\S+`: 匹配以 @ 开头的用户名或提及
- `t\.me/\S+`: 匹配以 t.me/ 开头的链接
- `\S*keyword\S*`: 匹配包含特定关键词的文本

你可以根据需要组合和修改这些模式,以匹配和替换你想要处理的文本内容。

## 其他用户需要更改的位置

如果你想让其他用户使用这个机器人,以下是他们需要更改的位置:

1. 在 `DEFAULT_CONFIG` 字典中,将 `bot_token` 字段的值替换为他们自己的 Telegram 机器人 Token。

2. 在 `process_message` 函数中,根据需要修改或添加正则表达式规则,以匹配和替换他们想要处理的文本内容。

3. 可选:在 `DEFAULT_CONFIG` 字典中,根据需要修改 `start_message`、`edit_empty_message` 和 `ignore_message_types` 字段的值,以自定义机器人的行为。

### 正则表达式的写法与示例：

以下是一些常用的正则表达式写法及其示例:

下面是一些常用的正则表达式模式及其示例:

字符匹配:

a: 匹配字符 "a"
abc: 匹配字符串 "abc"

特殊字符:

.: 匹配任意单个字符(除了换行符)
\d: 匹配任意数字字符
\w: 匹配任意字母、数字或下划线字符

数量修饰符:

*: 匹配前一个字符或模式零次或多次
+: 匹配前一个字符或模式一次或多次
?: 匹配前一个字符或模式零次或一次

分组和引用:

(abc): 匹配字符串 "abc" 并将其作为一个分组
\1: 引用第一个分组匹配到的内容

示例:

a+: 匹配一个或多个字符 "a",如 "a"、"aa"、"aaa"
\d{3}: 匹配三个数字字符,如 "123"、"456"
(\w+)@(\w+)\.(\w+): 匹配电子邮件地址,如 "example@gmail.com"

你可以根据实际需求组合使用这些正则表达式写法,以匹配和替换特定的文本模式。

## 贡献

欢迎提交 Issue 和 Pull Request 来改进这个项目。如果你有任何问题或建议,也可以在 Issue 中提出。

## 许可证

本项目采用 [MIT 许可证](LICENSE)进行许可。欢迎自由使用、修改和分发本项目的代码。
